<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>J-Bay Welders | Structural Engineering Control</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --blueprint-blue: #0f172a; --zinc: #64748b; --industrial-orange: #f97316; }
        body { font-family: 'Outfit', sans-serif; background-color: #020617; color: #f8fafc; margin: 0; }
        
        /* Navigation & Hidden CRM */
        header.main-nav { position: fixed; top: 0; width: 100%; z-index: 1000; background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(10px); border-bottom: 2px solid rgba(255,255,255,0.05); }
        .tab-content { display: none; padding-top: 140px; padding-bottom: 100px; }
        .tab-content.active { display: block; animation: entry 0.4s ease-out; }
        @keyframes entry { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .nav-link { font-size: 11px; font-weight: 800; letter-spacing: 0.15em; text-transform: uppercase; color: var(--zinc); transition: 0.3s; cursor: pointer; position: relative; }
        .active-tab { color: white !important; }
        .active-tab::after { content: ''; position: absolute; bottom: -8px; left: 0; width: 100%; height: 3px; background: var(--industrial-orange); }

        /* CRM Specific UI */
        #crm-portal { display: none; position: fixed; inset: 0; background: #020617; z-index: 9999; padding: 40px; overflow-y: auto; }
        .crm-stat-card { background: #0f172a; border: 1px solid #1e293b; padding: 20px; border-radius: 4px; border-top: 3px solid var(--industrial-orange); }
        .crm-table { width: 100%; text-align: left; font-size: 13px; border-collapse: collapse; }
        .crm-table th { color: var(--zinc); padding: 12px; text-transform: uppercase; border-bottom: 1px solid #1e293b; }
        .crm-table td { padding: 12px; border-bottom: 1px solid #0f172a; }

        /* Logo Canvas */
        .logo-container { position: relative; width: 280px; height: 60px; display: flex; align-items: center; }
        #weldCanvas { position: absolute; top: 0; left: 0; pointer-events: none; z-index: 10; }

        /* WhatsApp */
        .wa-float { position: fixed; bottom: 30px; right: 30px; background-color: #25d366; color: #FFF; border-radius: 50px; z-index: 1001; padding: 15px; display: flex; align-items: center; gap: 10px; text-decoration: none; box-shadow: 0 10px 25px rgba(0,0,0,0.3); }

        input, select, textarea { background: #0f172a !important; border: 1px solid #334155 !important; color: white !important; padding: 0.8rem !important; border-radius: 4px !important; }
    </style>
</head>
<body>

    <div id="crm-portal">
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-10">
                <div>
                    <h1 class="text-4xl font-black italic uppercase">Project <span class="text-industrial-orange">Intelligence</span></h1>
                    <p class="text-zinc-500 text-xs tracking-widest uppercase">Lead Architect Secure Access</p>
                </div>
                <button onclick="toggleCRM()" class="bg-zinc-800 px-6 py-2 text-xs font-bold uppercase">Exit Portal</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-10">
                <div class="crm-stat-card">
                    <p class="text-zinc-500 text-[10px] uppercase font-bold">Active Tonnage</p>
                    <p class="text-3xl font-black italic">42.5 T</p>
                </div>
                <div class="crm-stat-card">
                    <p class="text-zinc-500 text-[10px] uppercase font-bold">Pending Quotes</p>
                    <p class="text-3xl font-black italic text-industrial-orange">12</p>
                </div>
                <div class="crm-stat-card">
                    <p class="text-zinc-500 text-[10px] uppercase font-bold">In Fabrication</p>
                    <p class="text-3xl font-black italic">08</p>
                </div>
                <div class="crm-stat-card">
                    <p class="text-zinc-500 text-[10px] uppercase font-bold">Site Installs</p>
                    <p class="text-3xl font-black italic text-blue-400">03</p>
                </div>
            </div>

            <div class="bg-slate-900/50 border border-white/5 p-8 rounded">
                <h3 class="text-xl font-bold mb-6 italic uppercase">Live Pipeline</h3>
                <table class="crm-table">
                    <thead>
                        <tr>
                            <th>Principal</th>
                            <th>Scope</th>
                            <th>Status</th>
                            <th>Metallurgy</th>
                            <th>Value Est.</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="crm-leads-body">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <header class="main-nav px-8 py-4">
        <div class="max-w-7xl mx-auto flex flex-col lg:flex-row justify-between items-center">
            <div class="logo-container">
                <canvas id="weldCanvas" width="280" height="60"></canvas>
                <div class="leading-none z-20 relative">
                    <span class="text-3xl font-black tracking-tighter uppercase italic">J-BAY</span>
                    <span class="text-3xl font-light tracking-tighter uppercase ml-1 text-industrial-orange">WELDERS</span>
                </div>
            </div>
            <nav class="flex gap-8">
                <div onclick="switchTab('home')" class="nav-link active-tab" id="btn-home">Practice</div>
                <div onclick="switchTab('knowledge')" class="nav-link" id="btn-knowledge">Intelligence</div>
                <div onclick="switchTab('whatsapp')" class="nav-link" id="btn-whatsapp">Manifest</div>
                <div onclick="switchTab('arcade')" class="nav-link" id="btn-arcade">Workshop</div>
            </nav>
        </div>
    </header>

    <main id="home" class="tab-content active px-8">
        <div class="max-w-6xl mx-auto grid lg:grid-cols-2 gap-20 items-center">
            <div>
                <h1 class="text-7xl font-black uppercase italic leading-[0.8] mb-8">Structural <br><span class="text-industrial-orange">Excellence.</span></h1>
                <p class="text-zinc-400 text-lg leading-relaxed mb-10">40 Years of architectural steel fabrication in J-Bay. We don't just weld; we engineer legacies.</p>
                <button onclick="switchTab('whatsapp')" class="bg-industrial-orange text-white px-8 py-4 text-xs font-black uppercase tracking-widest">Consultation</button>
            </div>
            <div class="grid gap-4">
                <div class="bg-slate-900 p-6 border-l-4 border-industrial-orange uppercase">
                    <p class="text-[10px] text-zinc-500 font-bold">Current Capacity</p>
                    <p class="text-xl font-black italic">Accepting Coastal Projects Q3 2026</p>
                </div>
            </div>
        </div>
    </main>

    <main id="whatsapp" class="tab-content px-8">
        <div class="max-w-2xl mx-auto bg-slate-900 p-12 border border-white/5">
            <h2 class="text-3xl font-black uppercase italic mb-8">Request <span class="text-industrial-orange">Specs</span></h2>
            <form onsubmit="handleForm(event)" class="space-y-6">
                <input type="text" id="client_name" placeholder="Contact Name" required class="w-full">
                <select id="proj_type" class="w-full">
                    <option value="Portal Frame">Portal Framing</option>
                    <option value="Mezzanine">Mezzanine Floor</option>
                    <option value="Marine Balustrade">Marine Balustrade</option>
                </select>
                <textarea id="proj_desc" placeholder="Project Description..." class="w-full h-32"></textarea>
                <button type="submit" class="w-full bg-industrial-orange py-4 font-black uppercase">Send to Workshop</button>
            </form>
        </div>
    </main>

    <a href="https://wa.me/27663544654" target="_blank" class="wa-float">
        <span class="text-[10px] font-black uppercase mr-2">Quick Call</span>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.011 0C5.384 0 0 5.37 0 11.975c0 2.112.547 4.162 1.588 5.957L.058 24l6.23-1.63c1.734.945 3.693 1.445 5.703 1.445 6.628 0 12.011-5.37 12.011-11.975S18.639 0 12.011 0z"/></svg>
    </a>

    <script>
        // --- DATA & CRM LOGIC ---
        let leads = JSON.parse(localStorage.getItem('jbay_leads')) || [
            { name: "Global Const.", type: "Portal Frame", status: "In Fabrication", metal: "350WA", value: "R240k" },
            { name: "Res. Build", type: "Balustrade", status: "Quoting", metal: "316SS", value: "R85k" }
        ];

        function handleForm(e) {
            e.preventDefault();
            const newLead = {
                name: document.getElementById('client_name').value,
                type: document.getElementById('proj_type').value,
                status: "New Lead",
                metal: "Pending",
                value: "TBD"
            };
            leads.push(newLead);
            localStorage.setItem('jbay_leads', JSON.stringify(leads));
            renderCRM();
            alert("Specs transmitted to Lead Architect.");
            switchTab('home');
        }

        function renderCRM() {
            const body = document.getElementById('crm-leads-body');
            body.innerHTML = leads.map((l, i) => `
                <tr>
                    <td class="font-bold">${l.name}</td>
                    <td>${l.type}</td>
                    <td><span class="bg-orange-500/20 text-industrial-orange px-2 py-1 text-[10px] rounded">${l.status}</span></td>
                    <td>${l.metal}</td>
                    <td>${l.value}</td>
                    <td><button onclick="deleteLead(${i})" class="text-red-500 hover:underline">Clear</button></td>
                </tr>
            `).join('');
        }

        function deleteLead(index) {
            leads.splice(index, 1);
            localStorage.setItem('jbay_leads', JSON.stringify(leads));
            renderCRM();
        }

        // --- HIDDEN KEY LOGIC ---
        window.addEventListener('keydown', (e) => {
            if (e.shiftKey && e.key === 'A') { // Shift + A to open CRM
                toggleCRM();
            }
        });

        function toggleCRM() {
            const portal = document.getElementById('crm-portal');
            const isHidden = portal.style.display === 'none' || portal.style.display === '';
            portal.style.display = isHidden ? 'block' : 'none';
            if (isHidden) renderCRM();
        }

        // --- UI & LOGO ANIMATION ---
        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(b => b.classList.remove('active-tab'));
            document.getElementById(id).classList.add('active');
            document.getElementById('btn-' + id).classList.add('active-tab');
        }

        // [Logo animation logic from previous version remains here...]
        const wCanvas = document.getElementById('weldCanvas');
        const wCtx = wCanvas.getContext('2d');
        let sparks = [];
        class Spark {
            constructor(x, y) {
                this.x = x; this.y = y; this.size = Math.random() * 2;
                this.speedX = (Math.random() - 0.5) * 8;
                this.speedY = (Math.random() - 0.8) * 10;
                this.life = 1; this.decay = Math.random() * 0.03 + 0.02;
            }
            update() { this.x += this.speedX; this.y += this.speedY; this.speedY += 0.2; this.life -= this.decay; }
            draw() { wCtx.fillStyle = `rgba(255,160,0,${this.life})`; wCtx.fillRect(this.x, this.y, this.size, this.size); }
        }
        function animate() {
            wCtx.clearRect(0,0,280,60);
            if(Math.random() > 0.4) sparks.push(new Spark(85, 30));
            sparks.forEach((s, i) => { s.update(); s.draw(); if(s.life <= 0) sparks.splice(i,1); });
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
